(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{183:function(e,t,a){e.exports=a(426)},401:function(e,t,a){},406:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},425:function(e,t,a){},426:function(e,t,a){"use strict";a.r(t);a(184),a(198);var n=a(0),r=a.n(n),l=a(90),o=a.n(l),s=(a(401),a(91)),c=a(40),i=a(70),u="LOAD_CONF_SUCCESS",m="LOAD_CONF_ERROR",d="LOAD_NEW_QUERY_START",h="LOAD_NEW_QUERY_SUCCESS",v="LOAD_NEW_QUERY_ERROR",g="LOAD_NEW_PAGE_START",E="LOAD_NEW_PAGE_SUCCESS",p="LOAD_NEW_PAGE_ERROR",f={loadForm:!0,showForm:!1,errorForm:!1,disableForm:!0,specifySearch:!1,showParams:!1,loadResult:!1,showResult:!1,muteResult:!1,errorResult:!1,showPagination:!1};var b={currentPage:void 0,maxPage:void 0};var y=Object(i.b)({showHide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=Object(c.a)({},e);switch(t.type){case u:return a.loadForm=!1,a.showForm=!0,a.disableForm=!1,a.specifySearch=!0,a;case m:return a.loadForm=!1,a.errorForm=!0,a;case d:return a.disableForm=!0,a.specifySearch=!1,a.showParams=!1,a.loadResult=!0,a.showResult=!1,a.showPagination=!1,a;case h:return a.disableForm=!1,a.specifySearch=!1,a.showParams=!0,a.muteResult=!1,a.loadResult=!1,a.showResult=!0,a.showPagination=!0,a;case v:return a.showForm=!0,a.disableForm=!1,a.loadResult=!1,a.specifySearch=!1,a.showParams=!1,a.showResult=!1,a.errorResult=!0,a.showPagination=!1,a;case g:return a.disableForm=!0,a.showResult=!0,a.loadResult=!0,a.specifySearch=!1,a.muteResult=!0,a.showPagination=!0,a;case E:return a.disableForm=!1,a.showParams=!0,a.showResult=!0,a.loadResult=!1,a.muteResult=!1,a.specifySearch=!1,a.showPagination=!0,a;case p:return a.showForm=!0,a.showParams=!1,a.disableForm=!1,a.showResult=!1,a.loadResult=!1,a.specifySearch=!1,a.errorResult=!0,a.showPagination=!1,a;default:return e}},conf:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return t.data;default:return e}},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:case E:return t.data.result;default:return e}},paginator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;function a(){var a=Object(c.a)({},e);return a.currentPage=t.data.result.page,a.maxPage=t.data.result.total_pages,a}switch(t.type){case h:case E:return a();default:return e}},requestParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:case E:return t.data.requestParams;default:return e}}}),P=Object(i.c)(y,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),w=a(52),_=a(53),O=a(55),R=a(54),N=a(56);a(406),a(88);function x(e){return{type:u,data:e}}function S(){return{type:m}}function j(){return{type:d}}function k(e){return{type:h,data:e}}function F(){return{type:v}}function C(){return{type:g}}function L(e){return{type:E,data:e}}function A(){return{type:p}}var T=function(){return r.a.createElement("div",null,"Loading configuration")},V=a(21),M=a(119),D=a.n(M),Q=[{value:"popularity.desc",text:"Popularity (More-Less)"},{value:"popularity.asc",text:"Popularity (Less-More)"},{value:"revenue.desc",text:"Revenue (More-Less)"},{value:"revenue.asc",text:"Revenue (Less-More)"},{value:"release_date.desc",text:"Release date (Newer-Older)"},{value:"release_date.asc",text:"Release date (Older-Newer)"},{value:"original_title.asc",text:"Original title (A-Z)"},{value:"original_title.desc",text:"Original title (Z-A)"},{value:"vote_average.desc",text:"Rating (More-Less)"},{value:"vote_average.asc",text:"Rating (Less-More)"},{value:"vote_count.desc",text:"Vote count (More-Less)"},{value:"vote_count.asc",text:"Vote count (Less-More)"}],q=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"===typeof e&&(t=e,"object"===typeof a&&Object.keys(a).length)){t+="?";for(var n=Object.entries(a),r=0;r<n.length;r+=1)r&&(t+="&"),t+="".concat(n[r][0],"=").concat(n[r][1])}return console.log(t),t},U=(a(422),a(423),function(e){for(var t=[{value:"",text:"any"}],a=+(new Date).getFullYear();a>=+e;a-=1)t.push({value:"".concat(a),text:"".concat(a)});return t}(1850)),W=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(R.a)(t).call(this,e))).state={year:"",adult:!1,video:!1,sort:"popularity.desc",rating:{min:0,max:10},votes:{min:0,max:25e3}},a.handleEvent=a.handleEvent.bind(Object(V.a)(a)),a.handleValue=a.handleValue.bind(Object(V.a)(a)),a.handleSwitch=a.handleSwitch.bind(Object(V.a)(a)),a.search=a.search.bind(Object(V.a)(a)),a}return Object(N.a)(t,e),Object(_.a)(t,[{key:"handleEvent",value:function(e){var t=this;return function(a){var n={};n[e]=a.target.value,t.setState(n)}}},{key:"handleValue",value:function(e){var t=this;return function(a){var n={};n[e]=a,t.setState(n)}}},{key:"handleSwitch",value:function(e){var t=this;return function(){var a={};a[e]=!Object(c.a)({},t.state)[e],t.setState(a)}}},{key:"search",value:function(){var e=this.props,t=e.startQuery,a=e.loadedQuery,n=e.errQuery,r=function(e){var t={api_key:"5874acfd11651a28c55771624f7021f4",language:"en-US",page:1,sort_by:e.sort,include_adult:e.adult,include_video:e.video,"vote_count.gte":e.votes.min,"vote_count.lte":e.votes.max,"vote_average.gte":e.rating.min,"vote_average.lte":e.rating.max};return e.year&&(t.year=e.year),t}(Object(c.a)({},this.state));t(),fetch(q("https://api.themoviedb.org/3/discover/movie",r),{headers:{Accept:"application/json"}}).then(function(e){if(e.ok)return e.json();throw new Error("Response not OK! Response status: ".concat(e.status,": ").concat(e.statusText))}).then(function(e){a({result:e,requestParams:r})}).catch(function(){n()})}},{key:"render",value:function(){var e=this.state,t=e.year,a=e.adult,n=e.video,l=e.sort,o=e.rating,s=e.votes,c=this.props.disabled;return r.a.createElement("form",{id:"main-form"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("div",null,r.a.createElement("div",null,"Rating:"),r.a.createElement("div",{className:"height-hack"}),r.a.createElement(D.a,{minValue:0,maxValue:10,value:o,step:.1,formatLabel:function(e){return e.toFixed(1)},allowSameValues:!0,onChange:this.handleValue("rating"),onChangeComplete:this.handleValue("rating")}))),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("div",null,r.a.createElement("div",null,"Vote count:"),r.a.createElement("div",{className:"height-hack"}),r.a.createElement(D.a,{minValue:0,maxValue:25e3,value:s,step:100,allowSameValues:!0,onChange:this.handleValue("votes"),onChangeComplete:this.handleValue("votes")}))),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("label",{htmlFor:"year-select"},r.a.createElement("div",null,"Year:"),r.a.createElement("select",{id:"year-select",className:"form-control",value:t,onChange:this.handleEvent("year"),onBlur:this.handleEvent("year")},U.map(function(e){return r.a.createElement("option",{value:e.value,key:"".concat(e.value,":").concat(e.text)},e.text)})))),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("label",{htmlFor:"adult-button"},r.a.createElement("div",{className:"text-danger"},"Adult:"),r.a.createElement("input",{id:"adult-button",type:"button",className:a?"btn btn-success btn-full-width":"btn btn-outline-dark btn-full-width",value:a?"Include":"Do not include",onClick:this.handleSwitch("adult")}))),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("label",{htmlFor:"video-button"},r.a.createElement("div",null,"Video:"),r.a.createElement("input",{id:"video-button",type:"button",className:n?"btn btn-success btn-full-width":"btn btn-outline-dark btn-full-width",value:n?"Include":"Do not include",onClick:this.handleSwitch("video")}))),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("label",{htmlFor:"sort-select"},r.a.createElement("div",null,"Sort:"),r.a.createElement("select",{id:"sort-select",className:"form-control",value:l,onChange:this.handleEvent("sort"),onBlur:this.handleEvent("sort")},Q.map(function(e){return r.a.createElement("option",{value:e.value,key:"".concat(e.value,":").concat(e.text)},e.text)})))),r.a.createElement("div",{className:"col-0 col-sm-6 col-md-8"}),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-full-width",disabled:c,onClick:this.search},"Search")))))}}]),t}(n.Component);W.defaultProps={};var Y=W,I=function(){return r.a.createElement("div",null,"Could not get configuration! Please reload page!")},B=function(){return r.a.createElement("div",null,"Please specify your search")},H=function(){return r.a.createElement("div",null,"Loading data...")};a(424);var X=function(e){var t=e.posterPath,a=e.title,n=e.originalTitle,l=e.adult,o=e.video,s=e.rating,c=e.votes,i=e.overview;return r.a.createElement("article",{className:"item"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("img",{className:"poster",src:t,alt:"".concat(a," poster")})),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-8"},r.a.createElement("section",null,r.a.createElement("b",{className:"em2"},a)),r.a.createElement("section",null,r.a.createElement("b",{className:"em1-5"},r.a.createElement("em",null,n))),l&&r.a.createElement("section",null,r.a.createElement("b",{className:"text-danger"},"Adult")),o&&r.a.createElement("section",null,r.a.createElement("b",null,"Video")),r.a.createElement("section",null,r.a.createElement("span",null,"Rating: "),r.a.createElement("em",null,s),r.a.createElement("em",null,"(".concat(c," votes)"))),r.a.createElement("section",null,r.a.createElement("em",null,i))))))};var G=function(e){var t=e.results,a=e.mute,n=e.conf;return r.a.createElement("div",{className:a?"text-muted":""},t.map(function(e){return r.a.createElement(X,{posterPath:"".concat(n.secure_base_url).concat(n.poster_sizes[n.poster_sizes.length-1]).concat(e.poster_path),title:e.title,originalTitle:e.original_title,adult:e.adult,video:e.video,rating:e.vote_average,votes:e.vote_count,overview:e.overview,key:"".concat(e.title," ").concat(e.original_title)})}))},K=function(){return r.a.createElement("div",null,"Error loading data! Please reload page or specify new search!")},z=(a(425),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(R.a)(t).call(this,e))).state={disablePaginator:!1},a.disableFirst=a.disableFirst.bind(Object(V.a)(a)),a.disableLast=a.disableLast.bind(Object(V.a)(a)),a.goToPage=a.goToPage.bind(Object(V.a)(a)),a}return Object(N.a)(t,e),Object(_.a)(t,[{key:"disableFirst",value:function(){var e=this.props.paginator,t=this.state.disablePaginator;return!!(e.currentPage<=1||!e.currentPage||t)}},{key:"disableLast",value:function(){var e=this.props.paginator,t=this.state.disablePaginator;return!!(e.currentPage>=e.maxPage||!e.currentPage||!e.maxPage||t||e.currentPage>=1e3)}},{key:"goToPage",value:function(e){var t=this;this.setState({disablePaginator:!0});var a=this.props,n=a.startPage,r=a.loadedPage,l=a.errPage,o=function(){var e=t.props.requestParams;return Object(c.a)({},e)}();o.page=e,n(),fetch(q("https://api.themoviedb.org/3/discover/movie",o),{headers:{Accept:"application/json"}}).then(function(e){if(e.ok)return e.json();throw new Error("Response not OK! Response status: ".concat(e.status,": ").concat(e.statusText))}).then(function(e){r({result:e,requestParams:o}),t.setState({disablePaginator:!1})}).catch(function(){l()})}},{key:"render",value:function(){var e=this,t=this.props.paginator;return r.a.createElement("div",{className:"outside-paginator"},r.a.createElement("div",{id:"paginator"},r.a.createElement("button",{type:"button",className:"btn btn-outline-dark",disabled:this.disableFirst(),onClick:function(){e.goToPage(1)}},"<< 1"),r.a.createElement("button",{type:"button",className:"btn btn-outline-dark",disabled:this.disableFirst(),onClick:function(){e.goToPage(Math.min(Math.max(t.currentPage-1,1),t.maxPage,1e3))}},"< ".concat(Math.min(Math.max(t.currentPage-1,1),t.maxPage,1e3))),r.a.createElement("span",null," ".concat(t.currentPage," ")),r.a.createElement("button",{type:"button",className:"btn btn-outline-dark",disabled:this.disableLast(),onClick:function(){e.goToPage(Math.max(Math.min(t.currentPage+1,t.maxPage,1e3),1)||1)}},"".concat(Math.max(Math.min(t.currentPage+1,t.maxPage,1e3),1)||1," >")),r.a.createElement("button",{type:"button",className:"btn btn-outline-dark",disabled:this.disableLast(),onClick:function(){e.goToPage(Math.min(t.maxPage,1e3)||1)}},"".concat(Math.min(t.maxPage,1e3)||1," >>"))))}}]),t}(n.Component)),J={};Q.forEach(function(e){J[e.value]=e.text});var Z=function(e){var t=e.requestParams,a=e.result,n=e.mute;return r.a.createElement("article",{className:n?"text-muted":""},r.a.createElement("strong",null,"Rating: "),r.a.createElement("span",null,"from "),r.a.createElement("strong",null,+t["vote_average.gte"].toFixed(2)),r.a.createElement("span",null," to "),r.a.createElement("strong",null,+t["vote_average.lte"].toFixed(2)),r.a.createElement("span",null,"; "),r.a.createElement("strong",null,"Vote count: "),r.a.createElement("span",null,"from "),r.a.createElement("strong",null,t["vote_count.gte"]),r.a.createElement("span",null," to "),r.a.createElement("strong",null,t["vote_count.lte"]),r.a.createElement("span",null,"; "),t.include_adult&&r.a.createElement("strong",{className:"text-danger"},"Adult included; "),t.include_video&&r.a.createElement("strong",null,"Videos included; "),t.year&&r.a.createElement("span",null,r.a.createElement("span",null,"Year: "),r.a.createElement("strong",null,t.year),r.a.createElement("span",null,"; ")),r.a.createElement("span",null,"Sort: "),r.a.createElement("strong",null,J[t.sort_by],"."),r.a.createElement("div",null,r.a.createElement("span",null,"Total results: "),r.a.createElement("strong",null,a.total_results),r.a.createElement("span",null,"; Total pages: "),r.a.createElement("strong",null,a.total_pages),r.a.createElement("span",null,"; Your page: "),r.a.createElement("strong",null,a.page,".")),a.total_pages>1e3&&r.a.createElement("div",null,r.a.createElement("strong",null,"Only first 1000 pages are available due to server-side API limitations.")))},$=function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getConf,a=e.errConf;fetch("https://api.themoviedb.org/3/configuration?api_key=".concat("5874acfd11651a28c55771624f7021f4"),{headers:{Accept:"application/json"}}).then(function(e){if(e.ok)return e.json();throw new Error("Response not OK! Response status: ".concat(e.status,": ").concat(e.statusText))}).then(function(e){return t(e.images)}).catch(function(){return a()})}},{key:"render",value:function(){var e=this.props,t=e.showHide,a=e.conf,n=e.startQuery,l=e.requestParams,o=e.loadedQuery,s=e.errQuery,c=e.paginator,i=e.startPage,u=e.loadedPage,m=e.errPage,d=e.result;return r.a.createElement("div",null,r.a.createElement("div",{className:"not-footer-full-height"},r.a.createElement("div",{className:"container"},r.a.createElement("header",null,t.loadForm&&r.a.createElement(T,null),t.showForm&&r.a.createElement(Y,{disabled:t.disableForm,startQuery:n,loadedQuery:o,errQuery:s}),t.errorForm&&r.a.createElement(I,null)),r.a.createElement("main",null,t.specifySearch&&r.a.createElement(B,null),t.showParams&&r.a.createElement(Z,{result:d,requestParams:l,mute:t.muteResult}),t.loadResult&&r.a.createElement(H,null),t.showResult&&r.a.createElement(G,{results:d.results,conf:a,mute:t.muteResult}),t.errorResult&&r.a.createElement(K,null)),r.a.createElement("nav",null,t.showPagination&&r.a.createElement(z,{paginator:c,requestParams:l,startPage:i,loadedPage:u,errPage:m})))),r.a.createElement("footer",{id:"footer",className:"bg-primary"},"Palii Bohdan"))}}]),t}(n.Component),ee=Object(s.b)(function(e){return{showHide:e.showHide,conf:e.conf,requestParams:e.requestParams,paginator:e.paginator,result:e.result}},function(e){var t=x,a=S,n=j,r=k,l=F,o=C,s=L,c=A;return{getConf:function(a){return e(t(a))},errConf:function(t){return e(a(t))},startQuery:function(t){return e(n(t))},loadedQuery:function(t){return e(r(t))},errQuery:function(){return e(l())},startPage:function(t){return e(o(t))},loadedPage:function(t){return e(s(t))},errPage:function(){return e(c())}}})($);var te=function(){return r.a.createElement(s.a,{store:P},r.a.createElement(ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[183,1,2]]]);
//# sourceMappingURL=main.27aa800e.chunk.js.map